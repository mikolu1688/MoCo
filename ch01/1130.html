<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Orientation + Motion Demo</title>

<style>
    body {
        font-family: "Microsoft JhengHei", Arial, sans-serif;
        padding: 20px;
        line-height: 1.8;
        background: #e7f8f6; /* Tiffany ç¶ æ·¡è‰²èƒŒæ™¯ */
        color: #333;
    }

    h2 {
        color: #1abc9c;
        text-align: center;
        font-weight: 600;
        margin-bottom: 15px;
    }

    button {
        padding: 12px 22px;
        font-size: 1.1rem;
        background: #1abc9c;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        display: block;
        margin: 20px auto;
        transition: 0.25s;
    }

    button:hover:not(:disabled) {
        background: #17a589;
    }

    button:disabled {
        background: #b2dcd6;
        cursor: default;
    }

    .card {
        background: white;
        padding: 18px 20px;
        border-radius: 14px;
        box-shadow: 0px 4px 12px rgba(0,0,0,0.08);
        margin-top: 20px;
    }

    h3 {
        margin-bottom: 10px;
        color: #16a085;
    }

    .val {
        font-size: 1.1rem;
        margin: 4px 0;
        display: flex;
        justify-content: space-between;
    }

    .label {
        font-weight: 600;
    }

    span {
        font-weight: 500;
    }
</style>
</head>
<body>

<h2>ğŸ“± DeviceOrientation + Motion æ„Ÿæ¸¬ç¤ºç¯„</h2>
<p style="text-align:center;">æŒ‰ä¸‹æŒ‰éˆ•ä¸¦æˆæ¬Šå¾Œï¼Œæ—‹è½‰æˆ–æ–æ™ƒæ‰‹æ©Ÿå³å¯çœ‹åˆ°å³æ™‚æ•¸æ“šã€‚</p>

<button id="btn">å–å¾—æ„Ÿæ¸¬å™¨æˆæ¬Šä¸¦é–‹å§‹</button>

<div class="card">
    <h3>DeviceOrientationï¼ˆæ–¹å‘è§’åº¦ï¼‰</h3>
    <p class="val"><span class="label">Alpha (Z)ï¼š</span> <span id="alpha">-</span></p>
    <p class="val"><span class="label">Beta (X)ï¼š</span> <span id="beta">-</span></p>
    <p class="val"><span class="label">Gamma (Y)ï¼š</span> <span id="gamma">-</span></p>
</div>

<div class="card">
    <h3>DeviceMotionï¼ˆåŠ é€Ÿåº¦ï¼‰</h3>
    <p class="val"><span class="label">axï¼š</span> <span id="ax">-</span></p>
    <p class="val"><span class="label">ayï¼š</span> <span id="ay">-</span></p>
    <p class="val"><span class="label">azï¼š</span> <span id="az">-</span></p>
</div>

<div class="card">
    <h3>DeviceMotionï¼ˆå«é‡åŠ›ï¼‰</h3>
    <p class="val"><span class="label">ax_gï¼š</span> <span id="ax_g">-</span></p>
    <p class="val"><span class="label">ay_gï¼š</span> <span id="ay_g">-</span></p>
    <p class="val"><span class="label">az_gï¼š</span> <span id="az_g">-</span></p>
</div>

<div class="card">
    <h3>Gyroscopeï¼ˆæ—‹è½‰é€Ÿç‡ï¼‰</h3>
    <p class="val"><span class="label">Î±(é€Ÿåº¦)ï¼š</span> <span id="rAlpha">-</span></p>
    <p class="val"><span class="label">Î²(é€Ÿåº¦)ï¼š</span> <span id="rBeta">-</span></p>
    <p class="val"><span class="label">Î³(é€Ÿåº¦)ï¼š</span> <span id="rGamma">-</span></p>
</div>

<script>
const btn = document.getElementById("btn");

// Orientation
const alphaEl = document.getElementById("alpha");
const betaEl  = document.getElementById("beta");
const gammaEl = document.getElementById("gamma");

// Acceleration
const axEl = document.getElementById("ax");
const ayEl = document.getElementById("ay");
const azEl = document.getElementById("az");

// Acceleration including gravity
const axgEl = document.getElementById("ax_g");
const aygEl = document.getElementById("ay_g");
const azgEl = document.getElementById("az_g");

// Rotation rate
const rAlphaEl = document.getElementById("rAlpha");
const rBetaEl  = document.getElementById("rBeta");
const rGammaEl = document.getElementById("rGamma");

btn.addEventListener("click", async () => {
    try {
        if (!window.DeviceMotionEvent && !window.DeviceOrientationEvent) {
            alert("æ­¤è£ç½®ä¸æ”¯æ´ Motion/Orientation æ„Ÿæ¸¬å™¨");
            return;
        }

        if (typeof DeviceOrientationEvent?.requestPermission === "function") {
            const r1 = await DeviceOrientationEvent.requestPermission();
            if (r1 !== "granted") {
                alert("æœªå…è¨±è®€å– DeviceOrientation");
                return;
            }
        }

        if (typeof DeviceMotionEvent?.requestPermission === "function") {
            const r2 = await DeviceMotionEvent.requestPermission();
            if (r2 !== "granted") {
                alert("æœªå…è¨±è®€å– DeviceMotion");
                return;
            }
        }

        window.addEventListener("deviceorientation", (event) => {
            alphaEl.textContent = event.alpha?.toFixed(2) ?? "-";
            betaEl.textContent  = event.beta?.toFixed(2) ?? "-";
            gammaEl.textContent = event.gamma?.toFixed(2) ?? "-";
        });

        window.addEventListener("devicemotion", (event) => {
            const acc = event.acceleration || {};
            axEl.textContent = acc.x?.toFixed(2) ?? "-";
            ayEl.textContent = acc.y?.toFixed(2) ?? "-";
            azEl.textContent = acc.z?.toFixed(2) ?? "-";

            const accG = event.accelerationIncludingGravity || {};
            axgEl.textContent = accG.x?.toFixed(2) ?? "-";
            aygEl.textContent = accG.y?.toFixed(2) ?? "-";
            azgEl.textContent = accG.z?.toFixed(2) ?? "-";

            const rot = event.rotationRate || {};
            rAlphaEl.textContent = rot.alpha?.toFixed(2) ?? "-";
            rBetaEl.textContent  = rot.beta?.toFixed(2) ?? "-";
            rGammaEl.textContent = rot.gamma?.toFixed(2) ?? "-";
        });

        btn.disabled = true;
        btn.textContent = "æ„Ÿæ¸¬å™¨å·²å•Ÿå‹•";

    } catch (err) {
        alert("éŒ¯èª¤ï¼š" + err);
    }
});
</script>

</body>
</html>
