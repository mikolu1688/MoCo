<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å®šä½ç¤ºç¯„é </title>

<style>
/* --- RESETï¼Œé¿å…å¤–éƒ¨æ¨£å¼å½±éŸ¿ --- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* --- èƒŒæ™¯èˆ‡æ’ç‰ˆ --- */
body {
    font-family: "Microsoft JhengHei", sans-serif;
    background: linear-gradient(135deg, #a6f4ef, #dffffa, #c0f7f3);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 40px 20px;
}

/* --- å®¹å™¨å¡ç‰‡ --- */
.container {
    width: 100%;
    max-width: 480px;
    background: white;
    border-radius: 20px;
    padding: 32px 28px;
    box-shadow: 0 10px 35px rgba(0,0,0,0.12);
    text-align: center;
    animation: fadein 0.5s ease;
}

/* --- æ¨™é¡Œ --- */
h1 {
    color: #00a8a3;
    font-size: 1.8rem;
    margin-bottom: 20px;
}

/* --- æŒ‰éˆ•æ¨£å¼ --- */
button {
    background-color: #00b3b0;
    color: #fff;
    border: none;
    padding: 15px 32px;
    font-size: 1.2rem;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.25s;
    width: 100%;
    box-shadow: 0 6px 12px rgba(0,0,0,0.18);
}

button:hover {
    background-color: #009f9d;
    transform: translateY(-3px);
}

button:active {
    transform: translateY(1px);
}

/* --- é¡¯ç¤ºæ¡† --- */
#output {
    margin-top: 24px;
    padding: 18px;
    background: #f3fdfd;
    border-left: 5px solid #00b3b0;
    border-radius: 10px;
    text-align: left;
    white-space: pre-line;
    font-size: 1.05rem;
    line-height: 1.8;
    color: #333;
    min-height: 60px;
}

/* --- Loading å‹•ç•« --- */
.loading {
    animation: blink 1s infinite;
}

@keyframes blink {
    0% { opacity: 1; }
    50% { opacity: 0.4; }
    100% { opacity: 1; }
}

/* --- å¡ç‰‡æ·¡å…¥å‹•ç•« --- */
@keyframes fadein {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>
<div class="container">
    <h1>ğŸ“ ä½ç½®å–å¾—ç¤ºç¯„</h1>

    <button id="getLocationBtn">å–å¾—æˆ‘çš„ä½ç½®</button>
    
    <div id="output">å°šæœªå–å¾—ä½ç½®è³‡è¨Š</div>
</div>

<script>
// --- å…ƒç´  ---
const btn = document.getElementById("getLocationBtn");
const output = document.getElementById("output");

// --- é»æ“Š ---
btn.addEventListener("click", () => {
  output.classList.add("loading");
  output.textContent = "å®šä½ä¸­ï¼Œè«‹ç¨å€™...";
  getLocation();
});

// --- GPS â†’ IP fallback ---
function getLocation() {
  if ("geolocation" in navigator) {
    navigator.geolocation.getCurrentPosition(
      (pos) => {
        output.classList.remove("loading");
        const { latitude, longitude, accuracy } = pos.coords;
        output.innerHTML =
          `ã€GPS å®šä½æˆåŠŸï¼ˆé«˜ç²¾æº–ï¼‰ã€‘\n\n` +
          `ç·¯åº¦ï¼š${latitude}\n` +
          `ç¶“åº¦ï¼š${longitude}\n` +
          `ç²¾åº¦ï¼šÂ±${accuracy} å…¬å°º`;
      },
      (err) => {
        output.classList.remove("loading");
        fetchByIP();
      },
      { enableHighAccuracy: true, timeout: 6000 }
    );
  } else {
    fetchByIP();
  }
}

async function fetchByIP() {
  try {
    output.classList.add("loading");
    output.textContent = "GPS å¤±æ•—ï¼Œæ­£åœ¨ä»¥ IP å®šä½...";

    const res = await fetch("https://ipapi.co/json/");
    const data = await res.json();

    output.classList.remove("loading");
    output.innerHTML =
      `ã€IP å®šä½æˆåŠŸï¼ˆä½ç²¾æº–ï¼‰ã€‘\n\n` +
      `åŸå¸‚ï¼š${data.city}\n` +
      `åœ‹å®¶ï¼š${data.country_name}\n` +
      `ç·¯åº¦ï¼š${data.latitude}\n` +
      `ç¶“åº¦ï¼š${data.longitude}\n` +
      `ï¼ˆèª¤å·®å¯èƒ½åå¤§ï¼‰`;
  } catch (error) {
    output.classList.remove("loading");
    output.textContent = "å®šä½å¤±æ•—ï¼šç„¡æ³•å–å¾— IP è³‡è¨Š";
  }
}
</script>

</body>
</html>
